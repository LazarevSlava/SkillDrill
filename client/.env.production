- name: Prepare Vite env
  working-directory: client
  run: |
    rm -f .env.production
    echo "VITE_API_BASE_URL=${VITE_API_BASE_URL}" >> .env.production
    echo "VITE_AUTH_STUB=${VITE_AUTH_STUB}" >> .env.production
  env:
    VITE_API_BASE_URL: ${{ secrets.VITE_API_BASE_URL }}
    VITE_AUTH_STUB: ${{ secrets.VITE_AUTH_STUB }}

- name: Build client
  working-directory: client
  run: |
    npm ci
    npm run build
